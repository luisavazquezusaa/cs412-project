<!-- File: login.html
Author: Luisa Vazquez Usabiaga (lvu@bu.edu), 12/05/2025
Description: Login page for the subletting marketplace with email/password and Google OAuth options.
-->

<!-- project/login.html -->

{% extends 'project/base.html' %}
{% load static %}

{% block content %}
<h1>Login</h1>

<div class="auth-card">
    <!-- Django login form -->
    <form method="POST" class="form-stacked">
        {% csrf_token %}
        {{ form }}

        <!-- Redirect user to all listings page after login -->
        {% if request.GET.next %}
            <input type="hidden" name="next" value="{{ request.GET.next }}">
        {% else %}
            <input type="hidden" name="next" value="{% url 'show_all_listings' %}">
        {% endif %}

        <button type="submit" class="primary-btn full-width">Login</button>
    </form>

    <!-- Link to registration page -->
    <p class="auth-switch">
        Don't have an account? <a href="{% url 'register' %}">Register</a>
    </p>

    <div class="divider">
        <span>OR</span>
    </div>

    <!-- Google OAuth login button -->
    <div class="centered">
        <a href="/accounts/google/login/" class="google-btn">
            <img src="https://developers.google.com/identity/images/btn_google_signin_dark_normal_web.png" alt="Sign in with Google">
        </a>
    </div>
</div>
{% endblock %}
